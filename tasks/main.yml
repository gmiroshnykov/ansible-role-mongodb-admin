- name: create MongoDB admin user
  mongodb_user:
    user={{ mongodb_admin.username }}
    password={{ mongodb_admin.password }}
    database=admin
    roles={{ mongodb_admin.roles | join(',') }}
  changed_when: false
  ignore_errors: true
  when: mongodb_admin.username and mongodb_admin.password

- name: generate ~/.mongorc.js
  template:
    src=mongorc.js.j2
    dest=~/.mongorc.js
    mode=0644

# - name: create MongoDB mms user
#   mongodb_user:
#     login_user=admin
#     login_password=rebb1xr0ck$
#     user=mms
#     password=rebb1xr0ck$
#     database=admin
#     roles='clusterAdmin,readAnyDatabase'
#   changed_when: false

# - name: create MongoDB prodeye user
#   mongodb_user:
#     login_user=admin
#     login_password=rebb1xr0ck$
#     user=prodeye
#     password=rebb1xr0ck$
#     database=prodeye
#   changed_when: false
